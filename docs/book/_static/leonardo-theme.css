/*
 Leonardo’s Digital Codex – Theme CSS
 A Renaissance-inspired skin for Jupyter Book
*/

/* Fonts */
:root {
  --leonardo-brown: #8B4513;  /* Renaissance Brown */
  --leonardo-gold:  #DAA520;  /* Golden Rod */
  --leonardo-blue:  #4682B4;  /* Steel Blue */
  --leonardo-parch: #FDF5E6;  /* Old Lace */
  --leonardo-ink:   #2F4F4F;  /* Dark Slate Gray */

  --text-color: var(--leonardo-ink);
  --accent-color: var(--leonardo-gold);
}

html, body {
  color: var(--text-color);
  background: linear-gradient(45deg, #FDF5E6, #F5DEB3);
  background-attachment: fixed;
}

/* Subtle parchment noise overlay */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="1" stitchTiles="stitch"/></filter></defs><rect width="100%" height="100%" filter="url(%23n)" opacity="0.035"/></svg>');
}

/* Typography */
body, .bd-content p, .bd-content li {
  font-family: 'EB Garamond', 'Crimson Text', Georgia, serif;
  font-size: 18px;
  line-height: 1.6;
}

h1, h2, h3, .bd-article h1, .bd-article h2, .bd-article h3 {
  font-family: 'Cinzel', 'Cormorant Garamond', Georgia, serif;
  color: var(--leonardo-brown);
  letter-spacing: 0.02em;
}

/* Drop caps for chapter starts */
.chapter-start::first-letter {
  float: left;
  font-size: 3.6em;
  line-height: 0.9;
  margin: 0.05em 0.15em 0 0;
  color: var(--leonardo-gold);
  font-family: 'Cinzel', serif;
  text-shadow: 1px 2px 3px rgba(0,0,0,0.25);
}

/* Side navigation with golden rule */
.bd-sidebar-primary {
  border-right: 3px solid var(--leonardo-gold);
  background: rgba(139, 69, 19, 0.05);
}
.bd-sidebar .nav a.nav-link {
  font-family: 'Cormorant Garamond', serif;
}

/* Content container width approximating a golden ratio line length */
.bd-article-container, .bd-content .bd-article-container {
  max-width: 65rem; /* ~1040px */
}

/* Notebook cell styling with technical drawing borders */
/* Applies to executed cells in built Jupyter Book */
div.cell, .jp-Cell, .cell {
  border: 2px solid var(--leonardo-brown);
  border-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cdefs/%3E%3Crect x='1' y='1' width='58' height='58' fill='none' stroke='%238B4513' stroke-width='2'/%3E%3Cpath d='M1 12 H59 M1 48 H59 M12 1 V59 M48 1 V59' stroke='%238B4513' stroke-width='1' fill='none' opacity='0.45'/%3E%3C/svg%3E") 30 round;
  padding: 0.75rem;
  margin: 1.25rem 0;
  background: rgba(253, 245, 230, 0.35);
}

/* Code blocks on parchment */
.highlight, pre, code {
  background: rgba(253, 245, 230, 0.55);
}
pre {
  border-left: 4px solid var(--leonardo-gold);
  padding-left: 0.75rem;
}

/* Tables and figures */
table.docutils {
  border-color: var(--leonardo-brown);
}
img, figure img {
  border: 1px solid rgba(139,69,19,0.25);
  box-shadow: 0 2px 12px rgba(0,0,0,0.06);
}

/* Marginalia (Leonardo-style notes) */
.marginalia {
  font-family: 'Crimson Text', serif;
  font-style: italic;
  color: #704214;
  background: rgba(139, 69, 19, 0.06);
  border-left: 3px solid var(--leonardo-gold);
  padding: 0.5rem 0.75rem;
  margin: 1rem 0;
}

/* Mirror writing effects */
.mirror { transform: scaleX(-1); display: inline-block; }
.mirror-reveal { filter: blur(2px); transition: filter 200ms linear, transform 200ms ease; }
.mirror-reveal:hover { filter: blur(0); transform: scaleX(-1); }

/* Wax seal accents */
.seal {
  display: inline-block;
  background: radial-gradient(circle at 30% 30%, #b22222, #800000 60%);
  color: #fff; border-radius: 50%; padding: 0.4rem 0.7rem; font-weight: 700;
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.15), 0 2px 8px rgba(0,0,0,0.25);
  letter-spacing: 0.03em;
}

/* Compass-rose style anchors */
a, .reference.external {
  color: var(--leonardo-blue);
}
a:hover { color: var(--leonardo-brown); }

/* Subtle gear rotation for icons */
.gear { display: inline-block; animation: turn 12s linear infinite; }
@keyframes turn { from { transform: rotate(0deg);} to { transform: rotate(360deg);} }

/* Print styles for elegant PDFs */
@media print {
  body { background: #fff; }
  .bd-sidebar, .bd-header, .bd-footer { display: none !important; }
  .bd-article-container { max-width: 100% !important; }
}

/* Mobile tweaks */
@media (max-width: 960px) {
  body, .bd-content p, .bd-content li { font-size: 17px; }
}

